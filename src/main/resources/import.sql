INSERT INTO project(id, name) VALUES (nextval('hibernate_sequence'), 'Platform Management');

INSERT INTO component(id, project_id, name) SELECT nextval('hibernate_sequence'), id, 'Authorize' FROM project WHERE name='Platform Management';
INSERT INTO component(id, project_id, name) SELECT nextval('hibernate_sequence'), id, 'Authenticate' FROM project WHERE name='Platform Management';
INSERT INTO component(id, project_id, name) SELECT nextval('hibernate_sequence'), id, 'Subscription' FROM project WHERE name='Platform Management';
INSERT INTO component(id, project_id, name) SELECT nextval('hibernate_sequence'), id, 'Propagation' FROM project WHERE name='Platform Management';
INSERT INTO component(id, project_id, name) SELECT nextval('hibernate_sequence'), id, 'Plugin Echo' FROM project WHERE name='Platform Management';

INSERT INTO cve(id, project_id, name, fixVersion) SELECT nextval('hibernate_sequence'), id, 'CVE-2022-22965', '2022-04A' FROM project WHERE name='Platform Management';
INSERT INTO cve(id, project_id, name, fixVersion) SELECT nextval('hibernate_sequence'), id, 'CVE-2022-0778' , null       FROM project WHERE name='Platform Management';
INSERT INTO cve(id, project_id, name, fixVersion) SELECT nextval('hibernate_sequence'), id, 'CVE-2021-3711' , null       FROM project WHERE name='Platform Management';

INSERT INTO release(id, project_id, version) SELECT nextval('hibernate_sequence'), id, '2022-05A' FROM project WHERE name='Platform Management';

INSERT INTO cve_release(id, cve_id, release_id, component_id, cveName, releaseVersion, componentName, state) SELECT nextval('hibernate_sequence'), cve.id, r.id, c.id, cve.name, r.version, c.name, 1 FROM cve, release as r, component as c WHERE cve.name='CVE-2022-22965' and r.version='2022-05A' and c.name='Authorize';
INSERT INTO cve_release(id, cve_id, release_id, component_id, cveName, releaseVersion, componentName, state) SELECT nextval('hibernate_sequence'), cve.id, r.id, c.id, cve.name, r.version, c.name, 1 FROM cve, release as r, component as c WHERE cve.name='CVE-2022-22965' and r.version='2022-05A' and c.name='Authenticate';
INSERT INTO cve_release(id, cve_id, release_id, component_id, cveName, releaseVersion, componentName, state) SELECT nextval('hibernate_sequence'), cve.id, r.id, c.id, cve.name, r.version, c.name, 1 FROM cve, release as r, component as c WHERE cve.name='CVE-2022-22965' and r.version='2022-05A' and c.name='Subscription';
INSERT INTO cve_release(id, cve_id, release_id, component_id, cveName, releaseVersion, componentName, state) SELECT nextval('hibernate_sequence'), cve.id, r.id, c.id, cve.name, r.version, c.name, 1 FROM cve, release as r, component as c WHERE cve.name='CVE-2022-22965' and r.version='2022-05A' and c.name='Propagation';


